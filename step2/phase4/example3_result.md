# Phase 4 - ì˜ˆì œ 3: ë³µì¡í•œ ì‹œë‚˜ë¦¬ì˜¤ ê²°ê³¼

## ì‹¤í–‰ ì •ë³´

- **ì‹¤í–‰ ì‹œê°**: 2025-12-09
- **í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**: 3ê°œ
- **ì‚¬ìš© ëª¨ë¸**: claude-3-haiku-20240307
- **Temperature**: 0

---

## ì‹œë‚˜ë¦¬ì˜¤ë³„ ê²°ê³¼

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë‘ ë„ì‹œ ë‚ ì”¨ ë¹„êµ

**ì§ˆë¬¸**: "ì„œìš¸ê³¼ ë‰´ìš•ì˜ ë‚ ì”¨ë¥¼ ë¹„êµí•´ì¤˜"

#### ì‹¤í–‰ íë¦„

```
[ë£¨í”„ 1] LLM â†’ get_weather('Seoul') â†’ "Seoulì˜ ë‚ ì”¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
[ë£¨í”„ 2] LLM â†’ get_weather('New York') â†’ "New Yorkì˜ ë‚ ì”¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
[ë£¨í”„ 3] LLM â†’ ìµœì¢… ë‹µë³€ (ì‹¤íŒ¨)
```

#### í†µê³„

- **LLM í˜¸ì¶œ**: 3íšŒ
- **ë„êµ¬ í˜¸ì¶œ**: 2íšŒ (ëª¨ë‘ ì‹¤íŒ¨)
- **ë©”ì‹œì§€ ìˆ˜**: 5ê°œ

#### ìµœì¢… ë‹µë³€

```
ì£„ì†¡í•©ë‹ˆë‹¤. ì œê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‚ ì”¨ ì •ë³´ APIê°€ ì œí•œì ì´ì–´ì„œ
ì„œìš¸ê³¼ ë‰´ìš•ì˜ ë‚ ì”¨ë¥¼ ë¹„êµí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ë‚ ì”¨ ì •ë³´ë¥¼ ì°¾ì•„ë³´ê² ìŠµë‹ˆë‹¤.
```

#### ë¬¸ì œ ë¶„ì„

**ë„êµ¬ ì‹¤íŒ¨ ì›ì¸:**
- LLMì´ ë„ì‹œ ì´ë¦„ì„ **ì˜ì–´**ë¡œ ì „ë‹¬: `'Seoul'`, `'New York'`
- í•¨ìˆ˜ì˜ weather_dataëŠ” **í•œê¸€** í‚¤ë§Œ ë³´ìœ : `"ì„œìš¸"`, `"ë‰´ìš•"`
- í‚¤ ë§¤ì¹­ ì‹¤íŒ¨ë¡œ ë„êµ¬ ì‹¤í–‰ ì‹¤íŒ¨

**LLMì˜ ëŒ€ì‘:**
- ë‘ ë²ˆì˜ ë„êµ¬ í˜¸ì¶œ ì‹¤íŒ¨ í›„ í¬ê¸°
- ì‚¬ìš©ìì—ê²Œ ì •ì¤‘í•˜ê²Œ ì‹¤íŒ¨ ë©”ì‹œì§€ ì „ë‹¬
- ì¶”ê°€ ì‹œë„ ì—†ì´ ì¢…ë£Œ

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë‚ ì”¨ + ê³„ì‚°

**ì§ˆë¬¸**: "ì„œìš¸, ë‰´ìš•, ë„ì¿„ì˜ í‰ê·  ê¸°ì˜¨ì„ ê³„ì‚°í•´ì¤˜"

#### ì‹¤í–‰ íë¦„

```
[ë£¨í”„ 1] LLM â†’ get_weather('Seoul') â†’ ì‹¤íŒ¨
[ë£¨í”„ 2] LLM â†’ get_weather('New York') â†’ ì‹¤íŒ¨
[ë£¨í”„ 3] LLM â†’ get_weather('Tokyo') â†’ ì‹¤íŒ¨
[ë£¨í”„ 4] LLM â†’ ìµœì¢… ë‹µë³€ (ì‹¤íŒ¨)
```

#### í†µê³„

- **LLM í˜¸ì¶œ**: 4íšŒ
- **ë„êµ¬ í˜¸ì¶œ**: 3íšŒ (ëª¨ë‘ ì‹¤íŒ¨)
- **ë©”ì‹œì§€ ìˆ˜**: 7ê°œ

#### ìµœì¢… ë‹µë³€

```
ì£„ì†¡í•©ë‹ˆë‹¤. ì œê°€ ì œê³µí•œ ë„êµ¬ë¡œëŠ” ì„œìš¸, ë‰´ìš•, ë„ì¿„ì˜ í‰ê·  ê¸°ì˜¨ì„ ê³„ì‚°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
ì´ ë„êµ¬ë“¤ì€ íŠ¹ì • ë„ì‹œì˜ ë‚ ì”¨ ì •ë³´ë§Œ ì œê³µí•˜ê³  ìˆì–´ ì„¸ ë„ì‹œì˜ í‰ê· ì„ ê³„ì‚°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì´ ì •ë³´ë¥¼ ì°¾ì•„ë³´ê² ìŠµë‹ˆë‹¤.
```

#### ë¬¸ì œ ë¶„ì„

**ë„êµ¬ ì‹¤íŒ¨ ì›ì¸:**
- ì„¸ ë„ì‹œ ëª¨ë‘ ì˜ì–´ ì´ë¦„ ì‚¬ìš©: `'Seoul'`, `'New York'`, `'Tokyo'`
- weather_data í‚¤: `"ì„œìš¸"`, `"ë‰´ìš•"`, `"ë„ì¿„"`
- ëª¨ë“  ë‚ ì”¨ ì¡°íšŒ ì‹¤íŒ¨ â†’ ê³„ì‚° ë„êµ¬ í˜¸ì¶œ ì•ˆ í•¨

**LLMì˜ ëŒ€ì‘:**
- ì„¸ ë²ˆì˜ ì‹¤íŒ¨ í›„ ê³„ì‚° ë‹¨ê³„ë¡œ ì§„í–‰í•˜ì§€ ì•ŠìŒ
- ë…¼ë¦¬ì ìœ¼ë¡œ ë‚ ì”¨ ë°ì´í„° ì—†ì´ëŠ” í‰ê·  ê³„ì‚° ë¶ˆê°€ëŠ¥ íŒë‹¨
- **ë§¤ìš° ì§€ëŠ¥ì ì¸ íŒë‹¨!**

---

### ì‹œë‚˜ë¦¬ì˜¤ 3: ë‚ ì”¨ + ê²€ìƒ‰

**ì§ˆë¬¸**: "ì„œìš¸ ë‚ ì”¨ê°€ ì¢‹ìœ¼ë©´ ì¶”ì²œ ì¥ì†Œ ì•Œë ¤ì¤˜"

#### ì‹¤í–‰ íë¦„

```
[ë£¨í”„ 1] LLM â†’ get_weather('ì„œìš¸') â†’ "ë§‘ìŒ, ê¸°ì˜¨ 15ë„" âœ…
[ë£¨í”„ 2] LLM â†’ ìµœì¢… ë‹µë³€ (ì„±ê³µ)
```

#### í†µê³„

- **LLM í˜¸ì¶œ**: 2íšŒ
- **ë„êµ¬ í˜¸ì¶œ**: 1íšŒ (ì„±ê³µ)
- **ë©”ì‹œì§€ ìˆ˜**: 3ê°œ

#### ìµœì¢… ë‹µë³€

```
ì„œìš¸ ë‚ ì”¨ê°€ ì¢‹ì€ ê²ƒ ê°™ë„¤ìš”. ë‚ ì”¨ê°€ ì¢‹ì„ ë•Œ ì¶”ì²œë“œë¦¬ëŠ” ì¥ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

- ë‚¨ì‚° - ì„œìš¸ ì‹œë‚´ë¥¼ í•œëˆˆì— ë³¼ ìˆ˜ ìˆëŠ” ì „ë§ëŒ€ê°€ ìˆì–´ ë°ì´íŠ¸ë‚˜ ê°€ì¡± ë‚˜ë“¤ì´ì— ì¢‹ìŠµë‹ˆë‹¤.
- ê²½ë³µê¶ - ì•„ë¦„ë‹¤ìš´ ê³ ê¶ ê±´ì¶•ë¬¼ê³¼ ì •ì›ì„ ë‘˜ëŸ¬ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´íƒœì› - ë‹¤ì–‘í•œ ìŒì‹ì ê³¼ ì¹´í˜, ë¶€í‹°í¬ ë“±ì´ ìˆì–´ ì‚°ì±…í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤.
- í•œê°•ê³µì› - ìì „ê±° íƒ€ê¸°, ì‚°ì±…, í”¼í¬ë‹‰ ë“± ì—¬ê°€ í™œë™ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‚ ì”¨ê°€ ì¢‹ì€ ë§Œí¼ ì•¼ì™¸ í™œë™ì„ ì¦ê¸°ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ë„¤ìš”. ì–´ë–¤ ì¥ì†Œê°€ ë§ˆìŒì— ë“œì‹œë‚˜ìš”?
```

#### ì„±ê³µ ìš”ì¸

**ë„êµ¬ ì„±ê³µ ì›ì¸:**
- LLMì´ ë„ì‹œ ì´ë¦„ì„ **í•œê¸€**ë¡œ ì „ë‹¬: `'ì„œìš¸'`
- weather_data í‚¤ì™€ ì •í™•íˆ ë§¤ì¹­
- ë‚ ì”¨ ì¡°íšŒ ì„±ê³µ

**ì˜ˆìƒê³¼ ë‹¤ë¥¸ ì :**
- ì˜ˆìƒ: `search_web` ë„êµ¬ ì‚¬ìš©
- ì‹¤ì œ: LLMì´ ì§ì ‘ ì¶”ì²œ ì¥ì†Œ ì œê³µ
- ì´ìœ : LLMì´ ì´ë¯¸ ì„œìš¸ ê´€ê´‘ì§€ ì •ë³´ë¥¼ ì•Œê³  ìˆìŒ (example 1ì˜ "íŒŒì´ì¬ì´ ë­ì•¼?" íŒ¨í„´ê³¼ ë™ì¼)

**LLMì˜ ì§€ëŠ¥ì  íŒë‹¨:**
1. ë‚ ì”¨ í™•ì¸ ("ë§‘ìŒ, ê¸°ì˜¨ 15ë„")
2. ì¡°ê±´ í‰ê°€ (ë‚ ì”¨ê°€ ì¢‹ì€ê°€? â†’ Yes)
3. ì¶”ì²œ ì œê³µ (search_web ì—†ì´ ì§ì ‘ ì œê³µ)

---

## ì „ì²´ í†µê³„ ìš”ì•½

| ì‹œë‚˜ë¦¬ì˜¤ | LLM í˜¸ì¶œ | ë„êµ¬ í˜¸ì¶œ | ì„±ê³µ ì—¬ë¶€ | íŠ¹ì´ì‚¬í•­ |
|---------|---------|----------|----------|---------|
| **1** ë‘ ë„ì‹œ ë¹„êµ | 3íšŒ | 2íšŒ | âŒ ì‹¤íŒ¨ | ì˜ì–´ ë„ì‹œëª… ì‚¬ìš© |
| **2** ë‚ ì”¨ + ê³„ì‚° | 4íšŒ | 3íšŒ | âŒ ì‹¤íŒ¨ | ì˜ì–´ ë„ì‹œëª… ì‚¬ìš© |
| **3** ë‚ ì”¨ + ê²€ìƒ‰ | 2íšŒ | 1íšŒ | âœ… ì„±ê³µ | í•œê¸€ ë„ì‹œëª… ì‚¬ìš©, search_web ë¯¸ì‚¬ìš© |

---

## í•µì‹¬ í•™ìŠµ í¬ì¸íŠ¸

### 1. ë„êµ¬ í•¨ìˆ˜ì˜ ì…ë ¥ ê²€ì¦ ì¤‘ìš”ì„±

#### ë¬¸ì œì 

```python
def get_weather(city: str) -> str:
    weather_data = {
        "ì„œìš¸": "ë§‘ìŒ, ê¸°ì˜¨ 15ë„",
        "ë‰´ìš•": "íë¦¼, ê¸°ì˜¨ 10ë„",
        "ë„ì¿„": "ë¹„, ê¸°ì˜¨ 18ë„",
    }
    return weather_data.get(city, f"{city}ì˜ ë‚ ì”¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
```

**ë¬¸ì œ:** LLMì´ `'Seoul'` ì „ë‹¬ â†’ í‚¤ ë§¤ì¹­ ì‹¤íŒ¨

#### ê°œì„  ë°©ì•ˆ

**ë°©ë²• 1: ì–¸ì–´ ë³€í™˜ ë§¤í•‘**

```python
def get_weather(city: str) -> str:
    # ì˜ì–´ â†’ í•œê¸€ ë³€í™˜
    city_mapping = {
        "Seoul": "ì„œìš¸",
        "New York": "ë‰´ìš•",
        "Tokyo": "ë„ì¿„",
        "Paris": "íŒŒë¦¬",
        "London": "ëŸ°ë˜"
    }

    # ë³€í™˜ ì‹œë„
    city_kr = city_mapping.get(city, city)

    weather_data = {
        "ì„œìš¸": "ë§‘ìŒ, ê¸°ì˜¨ 15ë„",
        "ë‰´ìš•": "íë¦¼, ê¸°ì˜¨ 10ë„",
        "ë„ì¿„": "ë¹„, ê¸°ì˜¨ 18ë„",
    }

    return weather_data.get(city_kr, f"{city}ì˜ ë‚ ì”¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
```

**ë°©ë²• 2: ëŒ€ì†Œë¬¸ì ë¬´ì‹œ + ë‹¤êµ­ì–´ í‚¤**

```python
def get_weather(city: str) -> str:
    weather_data = {
        "ì„œìš¸": "ë§‘ìŒ, ê¸°ì˜¨ 15ë„",
        "seoul": "ë§‘ìŒ, ê¸°ì˜¨ 15ë„",
        "ë‰´ìš•": "íë¦¼, ê¸°ì˜¨ 10ë„",
        "new york": "íë¦¼, ê¸°ì˜¨ 10ë„",
        "ë„ì¿„": "ë¹„, ê¸°ì˜¨ 18ë„",
        "tokyo": "ë¹„, ê¸°ì˜¨ 18ë„",
    }

    # ì†Œë¬¸ì ë³€í™˜ í›„ ì¡°íšŒ
    return weather_data.get(city.lower(), f"{city}ì˜ ë‚ ì”¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
```

**ë°©ë²• 3: ë” ëª…í™•í•œ docstring**

```python
def get_weather(city: str) -> str:
    """
    ì§€ì •ëœ ë„ì‹œì˜ í˜„ì¬ ë‚ ì”¨ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

    Args:
        city: ë‚ ì”¨ë¥¼ ì¡°íšŒí•  ë„ì‹œ ì´ë¦„ (í•œê¸€ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”. ì˜ˆ: "ì„œìš¸", "ë‰´ìš•", "ë„ì¿„")

    Returns:
        í˜„ì¬ ë‚ ì”¨ ì •ë³´ ë¬¸ìì—´
    """
    # ...
```

### 2. LLMì˜ ì—ëŸ¬ ì²˜ë¦¬ ëŠ¥ë ¥

#### ì‹œë‚˜ë¦¬ì˜¤ 1 & 2 ì‹¤íŒ¨ í›„ ëŒ€ì‘

**LLMì˜ ì§€ëŠ¥ì  ëŒ€ì‘:**
1. ë„êµ¬ ì‹¤í–‰ ì‹¤íŒ¨ ì¸ì§€
2. ì¬ì‹œë„í•˜ì§€ ì•Šê³  í¬ê¸°
3. ì‚¬ìš©ìì—ê²Œ ì •ì¤‘í•œ ì‹¤íŒ¨ ë©”ì‹œì§€
4. ì¶”ê°€ ë¶ˆí•„ìš”í•œ ë„êµ¬ í˜¸ì¶œ ë°©ì§€

**ë©”ì‹œì§€ ì˜ˆì‹œ:**
```
"ì£„ì†¡í•©ë‹ˆë‹¤. ì œê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‚ ì”¨ ì •ë³´ APIê°€ ì œí•œì ì´ì–´ì„œ..."
```

**í•™ìŠµ í¬ì¸íŠ¸:**
- LLMì€ ë„êµ¬ ì‹¤íŒ¨ë¥¼ ìš°ì•„í•˜ê²Œ ì²˜ë¦¬
- ë¬´í•œ ì¬ì‹œë„ ë°©ì§€
- ì‚¬ìš©ì ê²½í—˜ ê³ ë ¤

### 3. LLMì˜ ë„êµ¬ ì„ íƒ ë³´ìˆ˜ì„±

#### ì‹œë‚˜ë¦¬ì˜¤ 3: search_web ë¯¸ì‚¬ìš©

**ì˜ˆìƒ:** `search_web("ì„œìš¸ ì¶”ì²œ ì¥ì†Œ")` í˜¸ì¶œ
**ì‹¤ì œ:** LLMì´ ì§ì ‘ ë‹µë³€ ì œê³µ

**ì´ìœ :**
- LLMì´ ì´ë¯¸ ì„œìš¸ ê´€ê´‘ì§€ ì •ë³´ë¥¼ ì•Œê³  ìˆìŒ
- ë¶ˆí•„ìš”í•œ ë„êµ¬ í˜¸ì¶œ ë°©ì§€ (íš¨ìœ¨ì„±)
- ë„êµ¬ëŠ” LLMì´ **ëª¨ë¥´ëŠ”** ì •ë³´ì—ë§Œ ì‚¬ìš©

**ë„êµ¬ ì‚¬ìš© ê¸°ì¤€:**
```
âœ… ë„êµ¬ ì‚¬ìš©: ì‹¤ì‹œê°„ ë°ì´í„°, LLMì´ ëª¨ë¥´ëŠ” ì •ë³´, ê³„ì‚°
âŒ ë„êµ¬ ë¯¸ì‚¬ìš©: LLMì´ ì´ë¯¸ ì•Œê³  ìˆëŠ” ì¼ë°˜ ì§€ì‹
```

**Example 1ì—ì„œë„ ë™ì¼í•œ íŒ¨í„´:**
- "íŒŒì´ì¬ì´ ë­ì•¼?" â†’ search_web ì˜ˆìƒ â†’ ì‹¤ì œ: ì§ì ‘ ë‹µë³€

### 4. ì¡°ê±´ë¶€ ë¡œì§ ì²˜ë¦¬

#### ì‹œë‚˜ë¦¬ì˜¤ 3ì˜ ì¡°ê±´ í‰ê°€

**ì§ˆë¬¸:** "ì„œìš¸ ë‚ ì”¨ê°€ **ì¢‹ìœ¼ë©´** ì¶”ì²œ ì¥ì†Œ ì•Œë ¤ì¤˜"

**LLMì˜ ì²˜ë¦¬:**
1. `get_weather('ì„œìš¸')` í˜¸ì¶œ â†’ "ë§‘ìŒ, ê¸°ì˜¨ 15ë„"
2. ì¡°ê±´ í‰ê°€: "ë§‘ìŒ" = ì¢‹ì€ ë‚ ì”¨ â†’ **True**
3. ì¶”ì²œ ì œê³µ

**ë§Œì•½ ë‚ ì”¨ê°€ ë‚˜ë¹´ë‹¤ë©´?**
- "ë¹„, ê¸°ì˜¨ 5ë„" â†’ ì¡°ê±´ False
- ì¶”ì²œ ì œê³µ ì•ˆ í•¨ ë˜ëŠ” ì‹¤ë‚´ ì¥ì†Œ ì¶”ì²œ ê°€ëŠ¥

**í•™ìŠµ í¬ì¸íŠ¸:**
- LLMì€ ìì—°ì–´ ì¡°ê±´ë¬¸ì„ ì´í•´í•˜ê³  í‰ê°€
- ë„êµ¬ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒ í–‰ë™ ê²°ì •

### 5. ì—¬ëŸ¬ ë„êµ¬ì˜ ìˆœì°¨ì  ì‹¤í–‰

#### ì‹œë‚˜ë¦¬ì˜¤ 2ì˜ ì˜ˆìƒ íë¦„ (ì„±ê³µ ì‹œ)

```
[ë£¨í”„ 1] get_weather('ì„œìš¸') â†’ "ë§‘ìŒ, ê¸°ì˜¨ 15ë„"
[ë£¨í”„ 2] get_weather('ë‰´ìš•') â†’ "íë¦¼, ê¸°ì˜¨ 10ë„"
[ë£¨í”„ 3] get_weather('ë„ì¿„') â†’ "ë¹„, ê¸°ì˜¨ 18ë„"
[ë£¨í”„ 4] calculate('(15 + 10 + 18) / 3') â†’ "14.333..."
[ë£¨í”„ 5] ìµœì¢… ë‹µë³€
```

**íŠ¹ì§•:**
- 3ê°œì˜ ë‚ ì”¨ ì¡°íšŒ â†’ ê²°ê³¼ ìˆ˜ì§‘
- ê³„ì‚° ë„êµ¬ë¡œ í‰ê·  ì‚°ì¶œ
- ëª¨ë“  ì •ë³´ í†µí•©í•˜ì—¬ ë‹µë³€

**ì‹¤ì œ ê²°ê³¼:**
- ë‚ ì”¨ ì¡°íšŒ ì‹¤íŒ¨ë¡œ ê³„ì‚° ë‹¨ê³„ ì§„ì… ì•ˆ í•¨
- **LLMì´ ë…¼ë¦¬ì ìœ¼ë¡œ íŒë‹¨**: ë°ì´í„° ì—†ìœ¼ë©´ ê³„ì‚° ë¶ˆê°€

---

## ë„êµ¬ ê²°í•© íŒ¨í„´

### íŒ¨í„´ 1: ë³‘ë ¬ ì¡°íšŒ â†’ ë¹„êµ

```
get_weather(ë„ì‹œA) + get_weather(ë„ì‹œB) â†’ ë¹„êµ ë¶„ì„
```

**ì‹œë‚˜ë¦¬ì˜¤ 1ì´ ì„±ê³µí–ˆë‹¤ë©´:**
```
ì„œìš¸: ë§‘ìŒ, 15ë„
ë‰´ìš•: íë¦¼, 10ë„
â†’ "ì„œìš¸ì´ ë‰´ìš•ë³´ë‹¤ 5ë„ ë” ë”°ëœ»í•˜ê³  ë‚ ì”¨ë„ ë” ì¢‹ìŠµë‹ˆë‹¤"
```

### íŒ¨í„´ 2: ì—¬ëŸ¬ ì¡°íšŒ â†’ ì§‘ê³„ ê³„ì‚°

```
get_weather(ë„ì‹œA) + get_weather(ë„ì‹œB) + get_weather(ë„ì‹œC)
  â†’ calculate(í‰ê· )
```

**ì‹œë‚˜ë¦¬ì˜¤ 2ê°€ ì„±ê³µí–ˆë‹¤ë©´:**
```
ì„œìš¸: 15ë„
ë‰´ìš•: 10ë„
ë„ì¿„: 18ë„
â†’ calculate('(15 + 10 + 18) / 3')
â†’ "ì„¸ ë„ì‹œì˜ í‰ê·  ê¸°ì˜¨ì€ 14.3ë„ì…ë‹ˆë‹¤"
```

### íŒ¨í„´ 3: ì¡°íšŒ â†’ ì¡°ê±´ í‰ê°€ â†’ ì¡°ê±´ë¶€ ê²€ìƒ‰

```
get_weather(ë„ì‹œ) â†’ ì¡°ê±´ í‰ê°€ â†’ (Trueì¼ ë•Œ) search_web(ì¿¼ë¦¬)
```

**ì‹œë‚˜ë¦¬ì˜¤ 3 (ì‹¤ì œ):**
```
get_weather('ì„œìš¸') â†’ "ë§‘ìŒ, ê¸°ì˜¨ 15ë„"
â†’ ì¡°ê±´ í‰ê°€: ë‚ ì”¨ ì¢‹ìŒ = True
â†’ ì¶”ì²œ ì œê³µ (search_web ëŒ€ì‹  ì§ì ‘ ë‹µë³€)
```

---

## ê°œì„  ì œì•ˆ

### 1. ë„ì‹œ ì´ë¦„ ì–¸ì–´ í†µì¼

#### ë°©ë²• A: ë„êµ¬ í•¨ìˆ˜ ê°œì„ 

```python
def get_weather(city: str) -> str:
    """
    ì§€ì •ëœ ë„ì‹œì˜ í˜„ì¬ ë‚ ì”¨ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

    Args:
        city: ë„ì‹œ ì´ë¦„ (í•œê¸€ ë˜ëŠ” ì˜ì–´ ê°€ëŠ¥)

    Returns:
        í˜„ì¬ ë‚ ì”¨ ì •ë³´
    """
    # ì˜ì–´ â†’ í•œê¸€ ë³€í™˜
    city_map = {
        "seoul": "ì„œìš¸",
        "new york": "ë‰´ìš•",
        "tokyo": "ë„ì¿„",
    }

    city_normalized = city.lower()
    city_kr = city_map.get(city_normalized, city)

    weather_data = {
        "ì„œìš¸": "ë§‘ìŒ, ê¸°ì˜¨ 15ë„",
        "ë‰´ìš•": "íë¦¼, ê¸°ì˜¨ 10ë„",
        "ë„ì¿„": "ë¹„, ê¸°ì˜¨ 18ë„",
    }

    return weather_data.get(city_kr, f"{city}ì˜ ë‚ ì”¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
```

#### ë°©ë²• B: Few-shot ì˜ˆì œ ì¶”ê°€

```python
# LLMì— ì˜ˆì œ ì œê³µ
system_message = """
ë„êµ¬ë¥¼ ì‚¬ìš©í•  ë•Œ ë„ì‹œ ì´ë¦„ì€ í•œê¸€ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.

ì˜ˆì‹œ:
- get_weather("ì„œìš¸")  âœ…
- get_weather("Seoul") âŒ

- get_weather("ë‰´ìš•")  âœ…
- get_weather("New York") âŒ
"""
```

### 2. ë„êµ¬ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë¡œì§

```python
def execute_tool_with_retry(tool_call, max_retries=2):
    """ë„êµ¬ ì‹¤í–‰ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„"""
    for attempt in range(max_retries):
        result = execute_tool(tool_call)

        if "ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" not in result:
            return result  # ì„±ê³µ

        # ì‹¤íŒ¨ ì‹œ ë„ì‹œ ì´ë¦„ ë³€í™˜ ì‹œë„
        if attempt < max_retries - 1:
            # ì˜ì–´ â†’ í•œê¸€ ë³€í™˜ ë¡œì§
            pass

    return result  # ìµœì¢… ì‹¤íŒ¨
```

### 3. ë„êµ¬ ì‹¤í–‰ ê²°ê³¼ ê²€ì¦

```python
for tool_call in response.tool_calls:
    result = execute_tool(tool_call)

    # ê²°ê³¼ ê²€ì¦
    if "ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" in result or "ì˜¤ë¥˜" in result:
        print(f"âš ï¸ ë„êµ¬ ì‹¤í–‰ ì‹¤íŒ¨: {tool_name}")
        # ëŒ€ì²´ ì „ëµ ë˜ëŠ” ì—ëŸ¬ ì²˜ë¦¬
    else:
        print(f"âœ… ë„êµ¬ ì‹¤í–‰ ì„±ê³µ: {tool_name}")
```

### 4. ë””ë²„ê¹… ì •ë³´ ì¶”ê°€

```python
print(f"ğŸ” ë„êµ¬ í˜¸ì¶œ:")
print(f"  - ì´ë¦„: {tool_name}")
print(f"  - ë§¤ê°œë³€ìˆ˜: {tool_args}")
print(f"  - ë§¤ê°œë³€ìˆ˜ íƒ€ì…: {type(tool_args['city'])}")
print(f"  - ê²°ê³¼: {result}")
```

---

## Phase 4 ì „ì²´ ë³µìŠµ

### ì˜ˆì œ 1: ì—¬ëŸ¬ ë„êµ¬ ì •ì˜

**ëª©í‘œ:** LLMì´ ìƒí™©ì— ë§ëŠ” ë„êµ¬ ì„ íƒ

**í•™ìŠµ:**
- 3ê°œ ë„êµ¬ ì •ì˜ (get_weather, calculate, search_web)
- LLMì´ ì§ˆë¬¸ ë¶„ì„í•˜ì—¬ ë„êµ¬ ì„ íƒ
- docstring ì¤‘ìš”ì„±
- ë„êµ¬ ì‚¬ìš©ì˜ ë³´ìˆ˜ì„± (í•„ìš”í•  ë•Œë§Œ)

### ì˜ˆì œ 2: ìˆ˜ë™ ì‹¤í–‰ ë£¨í”„

**ëª©í‘œ:** while ë£¨í”„ë¡œ ë°˜ë³µ ë„êµ¬ ì‹¤í–‰

**í•™ìŠµ:**
- `while True` íŒ¨í„´
- `if not response.tool_calls` ì¢…ë£Œ ì¡°ê±´
- ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ ê´€ë¦¬
- ìˆœì°¨ì  ë„êµ¬ í˜¸ì¶œ

### ì˜ˆì œ 3: ë³µì¡í•œ ì‹œë‚˜ë¦¬ì˜¤

**ëª©í‘œ:** ì—¬ëŸ¬ ë„êµ¬ ì¡°í•© ë° ì‹¤ì „ í™œìš©

**í•™ìŠµ:**
- ë„êµ¬ ê²°í•© íŒ¨í„´ (ë³‘ë ¬ ì¡°íšŒ, ì§‘ê³„ ê³„ì‚°, ì¡°ê±´ë¶€ ì‹¤í–‰)
- ë„êµ¬ ì‹¤íŒ¨ ì²˜ë¦¬
- LLMì˜ ì¡°ê±´ë¶€ ë¡œì§ í‰ê°€
- ì…ë ¥ ê²€ì¦ì˜ ì¤‘ìš”ì„±

---

## Phase 3 â†’ Phase 4 â†’ Phase 6

### Phase 3: Function Calling

```
ì§ˆë¬¸ â†’ LLM â†’ tool_call â†’ ë„êµ¬ ì‹¤í–‰ â†’ LLM â†’ ë‹µë³€
```

**íŠ¹ì§•:**
- í•¨ìˆ˜ 1ê°œ
- í˜¸ì¶œ 2íšŒ ê³ ì •
- ë‹¨ìˆœí•œ íë¦„

### Phase 4: Tool Use

```
ì§ˆë¬¸ â†’ [LLM â†’ tool_calls â†’ ë„êµ¬ ì‹¤í–‰]* â†’ LLM â†’ ë‹µë³€
                â†‘____________â†“ (ë°˜ë³µ ë£¨í”„)
```

**íŠ¹ì§•:**
- ì—¬ëŸ¬ í•¨ìˆ˜
- í˜¸ì¶œ íšŸìˆ˜ ë™ì 
- ë³µì¡í•œ ì‹œë‚˜ë¦¬ì˜¤ ì²˜ë¦¬

### Phase 6: Agent (ì˜ˆì •)

```
ì§ˆë¬¸ â†’ AgentExecutor â†’ [ìë™ ë£¨í”„] â†’ ë‹µë³€
```

**íŠ¹ì§•:**
- Phase 4ì˜ ìˆ˜ë™ ë£¨í”„ë¥¼ ìë™í™”
- ReAct íŒ¨í„´ (Reasoning + Acting)
- AgentExecutorê°€ ëª¨ë“  ê²ƒì„ ì²˜ë¦¬

---

## ì‹¤ì „ ì ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì—¬í–‰ ê³„íš ë´‡

```
ì‚¬ìš©ì: "ë‹¤ìŒ ì£¼ ë„ì¿„ ì—¬í–‰ì¸ë° ë‚ ì”¨ì™€ ì¶”ì²œ ì¥ì†Œ ì•Œë ¤ì¤˜"

[ë£¨í”„ 1] get_weather('ë„ì¿„') â†’ "ë¹„, ê¸°ì˜¨ 18ë„"
[ë£¨í”„ 2] search_web('ë„ì¿„ ì‹¤ë‚´ ê´€ê´‘ì§€') â†’ "ë°•ë¬¼ê´€, ì‡¼í•‘ëª°..."
[ë£¨í”„ 3] ìµœì¢… ë‹µë³€: "ë¹„ê°€ ì˜ˆìƒë˜ë‹ˆ ì‹¤ë‚´ í™œë™ì„ ì¶”ì²œí•©ë‹ˆë‹¤..."
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë°ì´í„° ë¶„ì„ ë´‡

```
ì‚¬ìš©ì: "ì„œìš¸, ë¶€ì‚°, ëŒ€êµ¬ì˜ ë‚ ì”¨ í‰ê· ê³¼ í‘œì¤€í¸ì°¨ ê³„ì‚°í•´ì¤˜"

[ë£¨í”„ 1] get_weather('ì„œìš¸') â†’ 15ë„
[ë£¨í”„ 2] get_weather('ë¶€ì‚°') â†’ 18ë„
[ë£¨í”„ 3] get_weather('ëŒ€êµ¬') â†’ 17ë„
[ë£¨í”„ 4] calculate('í‰ê· ') â†’ 16.67
[ë£¨í”„ 5] calculate('í‘œì¤€í¸ì°¨') â†’ 1.25
[ë£¨í”„ 6] ìµœì¢… ë‹µë³€
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì¡°ê±´ë¶€ ì•Œë¦¼ ë´‡

```
ì‚¬ìš©ì: "ì„œìš¸ ë‚ ì”¨ê°€ ë¹„ë©´ ìš°ì‚° ì±™ê¸°ë¼ê³  ì•Œë ¤ì¤˜"

[ë£¨í”„ 1] get_weather('ì„œìš¸') â†’ "ë§‘ìŒ, ê¸°ì˜¨ 15ë„"
[ë£¨í”„ 2] ì¡°ê±´ í‰ê°€: ë¹„ = False â†’ ì•Œë¦¼ ì•ˆ í•¨
[ë£¨í”„ 3] ìµœì¢… ë‹µë³€: "ì˜¤ëŠ˜ì€ ë§‘ìœ¼ë‹ˆ ìš°ì‚°ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤"
```

---

## ìš”ì•½

### Phase 4ì˜ í•µì‹¬

1. **ì—¬ëŸ¬ ë„êµ¬ ì •ì˜ ë° ë°”ì¸ë”©**
   - 3ê°œ ì´ìƒì˜ ë„êµ¬ë¥¼ LLMì— ì œê³µ
   - ê° ë„êµ¬ëŠ” ëª…í™•í•œ ì—­í• ê³¼ docstring

2. **ìˆ˜ë™ ì‹¤í–‰ ë£¨í”„**
   - `while True` íŒ¨í„´ìœ¼ë¡œ ë°˜ë³µ ì‹¤í–‰
   - `tool_calls` í™•ì¸í•˜ì—¬ ì¢…ë£Œ ì¡°ê±´ ì²˜ë¦¬
   - ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ë¡œ ì»¨í…ìŠ¤íŠ¸ ìœ ì§€

3. **LLMì˜ ììœ¨ì  íŒë‹¨**
   - ì§ˆë¬¸ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ ë„êµ¬ ì„ íƒ
   - ìˆœì°¨ì  ë„êµ¬ í˜¸ì¶œ
   - ì¡°ê±´ë¶€ ë¡œì§ í‰ê°€
   - ì—ëŸ¬ ì²˜ë¦¬

4. **ë„êµ¬ ê²°í•© íŒ¨í„´**
   - ë³‘ë ¬ ì¡°íšŒ â†’ ë¹„êµ
   - ì—¬ëŸ¬ ì¡°íšŒ â†’ ì§‘ê³„ ê³„ì‚°
   - ì¡°íšŒ â†’ ì¡°ê±´ í‰ê°€ â†’ ì¡°ê±´ë¶€ ì‹¤í–‰

5. **ì‹¤ì „ ê³ ë ¤ì‚¬í•­**
   - ì…ë ¥ ê²€ì¦ ë° ì •ê·œí™”
   - ë„êµ¬ ì‹¤íŒ¨ ì²˜ë¦¬
   - ì¬ì‹œë„ ë¡œì§
   - ë””ë²„ê¹… ì •ë³´ ì¶œë ¥

### ë‹¤ìŒ ë‹¨ê³„

**Phase 5: Workflow (ê±´ë„ˆë›¸ ìˆ˜ ìˆìŒ)**
- LCEL ê¸°ë°˜ ë‹¤ë‹¨ê³„ íŒŒì´í”„ë¼ì¸
- RunnableSequence, RunnableParallel

**Phase 6: Agent**
- **Phase 4ì˜ ìˆ˜ë™ ë£¨í”„ë¥¼ ìë™í™”!**
- AgentExecutor, create_react_agent
- ReAct íŒ¨í„´ (Reasoning + Acting)
- ë„êµ¬ ìë™ ì„ íƒ ë° ë°˜ë³µ ì‹¤í–‰

---

## Phase 4 ì™„ë£Œ!

**í•µì‹¬ í•™ìŠµ í¬ì¸íŠ¸:**
1. âœ… ì—¬ëŸ¬ ë„êµ¬ë¥¼ ì¡°í•©í•˜ì—¬ ë³µì¡í•œ ì§ˆë¬¸ ì²˜ë¦¬
2. âœ… ë„êµ¬ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë‹¤ë¥¸ ë„êµ¬ì˜ ì…ë ¥ìœ¼ë¡œ í™œìš©
3. âœ… ìˆ˜ë™ ë£¨í”„ë¡œ ì „ì²´ íë¦„ ì œì–´
4. âœ… LLMì´ ììœ¨ì ìœ¼ë¡œ ë‹¤ìŒ ë‹¨ê³„ ê²°ì •
5. âœ… ë„êµ¬ ì…ë ¥ ê²€ì¦ ë° ì—ëŸ¬ ì²˜ë¦¬ì˜ ì¤‘ìš”ì„±
6. âœ… Phase 6 (Agent)ì˜ ê¸°ì´ˆ ì´í•´

**Phase 6ì—ì„œëŠ” ì´ ëª¨ë“  ìˆ˜ë™ ì‘ì—…ì„ AgentExecutorê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤!**
